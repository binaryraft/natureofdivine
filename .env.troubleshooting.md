# Common .env Issues and Solutions

## Issue: Environment variables not loading in Next.js

### Checklist:

1. **File name must be exactly `.env` or `.env.local`**
   - Not `.env.txt` or `env` or `.env.example`

2. **No quotes around values** (unless the value itself contains spaces)
   ```env
   # ❌ WRONG
   ENVIA_API_KEY="your_key_here"
   
   # ✅ CORRECT
   ENVIA_API_KEY=your_key_here
   ```

3. **No spaces around the `=` sign**
   ```env
   # ❌ WRONG
   ENVIA_API_KEY = your_key_here
   
   # ✅ CORRECT
   ENVIA_API_KEY=your_key_here
   ```

4. **Server restart required**
   - After changing `.env`, you MUST restart the dev server
   - Stop with Ctrl+C and run `npm run dev` again

5. **Check the actual variable names**
   ```env
   ENVIA_API_KEY=your_production_key
   ENVIA_TEST_API_KEY=your_test_key
   ENVIA_IS_TEST=true
   ```

6. **For Next.js client-side access** (not needed for server actions)
   - Use `NEXT_PUBLIC_` prefix
   - But for server actions, regular names work

## Debug Steps:

1. Visit `http://localhost:3000/api/debug-env` to see what's loaded
2. Check if the keys exist and their lengths
3. Verify which key is being selected (TEST or PROD)

## Your .env should look like this:

```env
ENVIA_API_KEY=sk_live_xxxxxxxxxxxxxxxxx
ENVIA_TEST_API_KEY=sk_test_xxxxxxxxxxxxxxxxx
ENVIA_IS_TEST=true
```

**Important:** Make sure there are NO extra spaces, quotes, or special characters!
